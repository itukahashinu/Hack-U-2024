<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>質問の詳細</title>
</head>
<body>
    <h1>{{ question.question_text }}</h1>
    
    {% if question.choices.all %}  <!-- choice_set から choices に変更 -->
        <form action="{% url 'polls:vote' question.id %}" method="post">
            {% csrf_token %}
            {% for choice in question.choices.all %}  <!-- choice_set から choices に変更 -->
                <input type="radio" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}">
                <label for="choice{{ forloop.counter }}">{{ choice.choice_text }}</label><br>
            {% endfor %}
            <button type="submit">投票する</button>
        </form>
    {% else %}
        <p>この質問には選択肢がありません！</p>
    {% endif %}

    <a href="{% url 'polls:index' %}">ホームに戻る</a>

    <!-- デバッグ情報 -->
    <div style="margin-top: 20px; color: #666;">
        <p>デバッグ情報:</p>
        <p>質問ID: {{ question.id }}</p>
        <p>選択肢数: {{ question.choices.count }}</p>
        <ul>
        {% for choice in question.choices.all %}
            <li>{{ choice.choice_text }}</li>
        {% endfor %}
        </ul>
    </div>
</body>
</html>